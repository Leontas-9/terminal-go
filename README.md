# üñºÔ∏è Terminal-Go

[![Go Version](https://img.shields.io/badge/Go-1.21+-blue.svg)](https://golang.org/)
[![License](https://img.shields.io/badge/License-GPL%20v3-blue.svg)](https://www.gnu.org/licenses/gpl-3.0)
[![Platform](https://img.shields.io/badge/Platform-Windows-lightgrey.svg)](https://www.microsoft.com/windows)

> **Renderizador de im√°genes avanzado para terminal CLI** que transforma cualquier imagen en arte ASCII/Unicode utilizando c√≥digos de escape ANSI y bloques Unicode optimizados.

## üìñ Descripci√≥n

**Terminal-Go** es una biblioteca Go especializada que permite renderizar im√°genes de alta calidad directamente en la terminal CLI. Utiliza una combinaci√≥n sofisticada de:

- üé® **C√≥digos ANSI RGB de 24 bits** para colores verdaderos
- üì¶ **Bloques Unicode** (`‚ñÄ`, `‚ñÑ`, `‚ñà`) para simulaci√≥n de p√≠xeles 
- ‚ö° **Algoritmos optimizados** para rendimiento en tiempo real
- üéÆ **Control interactivo** con navegaci√≥n por teclado

## ‚ú® Caracter√≠sticas Principales

### üñºÔ∏è Renderizaci√≥n Avanzada
- **Soporte multi-formato**: JPEG, PNG, BMP, TIFF, WebP, GIF
- **Escalado inteligente** que preserva las proporciones
- **Interpolaci√≥n configurable** (Nearest Neighbor, Linear, etc.)
- **Ajuste autom√°tico** al tama√±o del terminal

### üé® Optimizaci√≥n de Colores
- **True Color RGB** (16.7 millones de colores)
- **Transparencia multinivel** con 5 escalas de opacidad
- **Cache de c√≥digos ANSI** para m√°ximo rendimiento
- **Detecci√≥n de colores similares** para optimizaci√≥n

### üéÆ Interactividad
- **Navegaci√≥n con flechas** para mover la imagen
- **Ajuste din√°mico** al redimensionar terminal
- **Modo pantalla alternativa** para preservar contenido
- **Control total del cursor** y configuraci√≥n UI

## üöÄ Instalaci√≥n

```powershell
go get -u github.com/Leontas-9/terminal-go
```

### Dependencias
```powershell
go get golang.org/x/image
go get golang.org/x/sys/windows
go get github.com/eiannone/keyboard
```

## üñºÔ∏è Ejemplos de Imagenes

<img width="408" height="408" alt="hollow-knight" src="https://github.com/user-attachments/assets/5c0d2f09-b974-4dc7-bdda-6cd3d8d042a2" />


<img width="421" height="402" alt="hollow-knight-render" src="https://github.com/user-attachments/assets/3098d6a0-c5a1-4509-9b7a-c1aa7028c003" />

---
    
<img width="597" height="409" alt="paisaje" src="https://github.com/user-attachments/assets/d5c13bf8-26db-46a9-9992-b51831bdb393" />


<img width="837" height="402" alt="paisaje-render" src="https://github.com/user-attachments/assets/7ab8c030-fc71-4f62-8a00-6cfcad4b8fa8" />

---

## üíª Uso B√°sico

### Ejemplo Simple
```go
package main

import (
    "github.com/Leontas-9/terminal-go/terminal/render"
    "fmt"
    "log"
)

func main() {
    // Cargar imagen desde archivo
    imgRGBA, err := terminal.LoadImage("mi_imagen.jpg")
    if err != nil {
        log.Fatal(err)
    }
    defer terminal.PutReusableRGBA(imgRGBA) // Liberar memoria

    // Crear imagen renderizable con configuraci√≥n b√°sica
    src := terminal.NewImage(imgRGBA)

    // Renderizar en terminal
    _, err = src.Print()
    if err != nil {
        log.Fatal(err)
    }
}
```

### Ejemplo Avanzado con Configuraci√≥n Personalizada
```go
package main

import (
    "github.com/Leontas-9/terminal-go/terminal/render"
    "golang.org/x/image/draw"
    "image"
    "log"
)

func main() {
    // Cargar imagen
    imgRGBA, err := terminal.LoadImage("imagen_compleja.png")
    if err != nil {
        log.Fatal(err)
    }
    defer terminal.PutReusableRGBA(imgRGBA)

    // Configuraci√≥n UI personalizada
    uiConfig := &terminal.UI_Settings{
        ShowCursor:        false,           // Ocultar cursor durante renderizado
        AlternativeScreen: true,            // Usar pantalla alternativa
        EraseScreen:       true,            // Limpiar pantalla antes
        Auto_Wrap:         false,           // Desactivar ajuste autom√°tico
    }

    // Crear imagen con par√°metros personalizados
    src := terminal.NewCustomImage(
        imgRGBA,                    // Imagen a renderizar
        image.Rect(0, 0, 80, 40),   // √Årea de renderizado (80x40 caracteres)
        image.Pt(10, 5),            // Posici√≥n inicial (columna 10, fila 5)
        draw.BiLinear,              // Interpolaci√≥n suave
        uiConfig,                   // Configuraci√≥n UI
    )

    // Renderizar imagen
    _, err = src.Print()
    if err != nil {
        log.Fatal(err)
    }

    // Modo interactivo - navegar con flechas del teclado
    err = src.Displacement()
    if err != nil {
        log.Fatal(err)
    }
}
```

## üéõÔ∏è Configuraci√≥n Avanzada

### UI_Settings - Opciones de Interfaz

| Par√°metro | Tipo | Descripci√≥n | Valor por Defecto |
|-----------|------|-------------|-------------------|
| `ShowCursor` | `bool` | Muestra/oculta el cursor al finalizar | `true` |
| `AlternativeScreen` | `bool` | Usa pantalla alternativa (preserva contenido previo) | `false` |
| `EraseScreen` | `bool` | Limpia la pantalla antes del renderizado | `false` |
| `Auto_Wrap` | `bool` | Habilita ajuste autom√°tico de l√≠nea | `true` |

### Interpoladores Disponibles

```go
import "golang.org/x/image/draw"

// Interpoladores soportados:
draw.NearestNeighbor    // M√°s r√°pido, pixelado
draw.BiLinear          // Balance calidad/velocidad  
draw.CatmullRom        // M√°xima calidad, m√°s lento
```

## üéÆ Controles Interactivos

En el modo `Displacement()`, puedes controlar la imagen con:

| Tecla | Acci√≥n |
|-------|---------|
| `‚Üë` | Mover imagen arriba |
| `‚Üì` | Mover imagen abajo |
| `‚Üê` | Mover imagen izquierda |
| `‚Üí` | Mover imagen derecha |
| `Esc` / `Ctrl+C` | Salir del modo interactivo |

## üìÅ Formatos Soportados

| Formato | Extensi√≥n | Notas |
|---------|-----------|-------|
| **JPEG** | `.jpg`, `.jpeg` | Compresi√≥n con p√©rdida |
| **PNG** | `.png` | Soporte completo de transparencia |
| **BMP** | `.bmp` | Formato bitmap sin compresi√≥n |
| **TIFF** | `.tiff` | Alta calidad, m√∫ltiples capas |
| **WebP** | `.webp` | Formato moderno de Google |
| **GIF** | `.gif` | ‚ö†Ô∏è Solo renderiza el primer frame |

## üîß API Detallada

### Funciones de Carga
```go
// LoadImage carga cualquier formato soportado y lo convierte a RGBA
func LoadImage(filepath string) (*image.RGBA, error)

// PutReusableRGBA libera la memoria de imagen (usar con defer)
func PutReusableRGBA(img *image.RGBA)
```

### Constructores de Imagen
```go
// NewImage - Configuraci√≥n autom√°tica b√°sica
func NewImage(img *image.RGBA) *RenderImage

// NewCustomImage - Control total de par√°metros
func NewCustomImage(
    img *image.RGBA, 
    bounds image.Rectangle, 
    initialPoint image.Point, 
    interpolator draw.Interpolator, 
    opts *UI_Settings
) *RenderImage
```

### M√©todos de RenderImage
```go
// Print - Renderiza imagen directamente en terminal
func (src *RenderImage) Print() (int, error)

// GetPNG - Obtiene datos de imagen en formato ANSI
func (src *RenderImage) GetPNG() ([]byte, image.Image, error)

// Displacement - Modo interactivo con controles de teclado
func (src *RenderImage) Displacement() error

// M√©todos de configuraci√≥n
func (src *RenderImage) SetUI_Settings(new *UI_Settings)
func (src *RenderImage) SetMargins(new image.Rectangle)
func (src *RenderImage) SetInterpolator(new draw.Interpolator)
func (src *RenderImage) SetInitialPoint(new image.Point)
```

## üõ†Ô∏è Funciones ANSI Utilitarias

### Control de Cursor
```go
import "github.com/Leontas-9/terminal-go/ansi"

ansi.MoveToStart()              // Cursor a posici√≥n (1,1)
ansi.MoveTo(column, row)        // Mover a posici√≥n espec√≠fica
ansi.MoveUp(lines)              // Mover hacia arriba
ansi.MoveDown(lines)            // Mover hacia abajo
ansi.MoveLeft(columns)          // Mover hacia izquierda
ansi.MoveRight(columns)         // Mover hacia derecha
```

### Limpieza de Pantalla
```go
ansi.EraseScreen()              // Limpiar pantalla completa
ansi.EraseLine()                // Limpiar l√≠nea actual
ansi.EraseRectangle(rect)       // Limpiar √°rea rectangular
```

### Configuraci√≥n de Terminal
```go
ansi.ShowCursor(show)           // Mostrar/ocultar cursor
ansi.AlternativeScreen(active)  // Pantalla alternativa
ansi.Auto_Wrap(active)          // Ajuste autom√°tico de l√≠nea
```

## üî¨ Aspectos T√©cnicos

### Algoritmo de Renderizado

1. **Carga y Validaci√≥n**: La imagen se carga y convierte a formato RGBA
2. **Ajuste de Bordes**: Se calculan los l√≠mites dentro del terminal
3. **Escalado Proporcional**: La imagen se redimensiona preservando aspecto
4. **Renderizado por Bloques**: Cada 2 p√≠xeles verticales se convierten en 1 bloque Unicode
5. **Optimizaci√≥n de Color**: Se detectan colores similares para reducir c√≥digos ANSI
6. **Salida Optimizada**: Se genera la secuencia m√≠nima de caracteres ANSI

### Pool de Memoria
El sistema utiliza pools de memoria reutilizable para optimizar el rendimiento:

```go
// Resoluciones precargadas para diferentes tama√±os
var resolutions = []image.Point{
    {141, 58},    // Terminal por defecto
    {320, 240},   // QVGA
    {640, 480},   // VGA
    {1280, 720},  // HD
    {1920, 1080}, // Full HD
    {2560, 1440}, // QHD
    {3840, 2160}, // 4K
}
```

### C√≥digos ANSI Precomputados
Para m√°ximo rendimiento, los c√≥digos ANSI se precalculan:

```go
// Ejemplo de c√≥digo ANSI para color RGB
"\033[38;2;255;82;197;48;2;155;106;0m"
//^^^ ^^^^ ^^^ ^^ ^^^ ^^^^ ^^^ ^^^ ^
// |    |   |  |   |   |    |   |  | 
// |    |   R  G   B   |    R   G  B 
// |    |              | 
// | color RGB     color RGB 
// |  (texto)       (fondo)
// |
// escape ANSI
```

## üéØ Ejemplos de C√≥digo

### Renderizado con M√°rgenes Personalizados
```go
func RenderWithCustomMargins() {
    imgRGBA, _ := terminal.LoadImage("imagen.png")
    defer terminal.PutReusableRGBA(imgRGBA)
    
    src := terminal.NewImage(imgRGBA)
    
    // Establecer √°rea de renderizado de 100x50 caracteres
    src.SetMargins(image.Rect(0, 0, 100, 50))
    
    // Posicionar en el centro-derecha del terminal
    src.SetInitialPoint(image.Pt(50, 10))
    
    src.Print()
}
```

### Modo Presentaci√≥n (Sin Interferencias)
```go
func PresentationMode() {
    imgRGBA, _ := terminal.LoadImage("presentacion.jpg")
    defer terminal.PutReusableRGBA(imgRGBA)
    
    config := &terminal.UI_Settings{
        ShowCursor:        false,  // Sin cursor visible
        AlternativeScreen: true,   // Pantalla limpia
        EraseScreen:       true,   // Limpiar antes
        Auto_Wrap:         false,  // Control total
    }
    
    src := terminal.NewCustomImage(
        imgRGBA,
        imgRGBA.Rect,
        image.Pt(0, 0),
        draw.BiLinear,
        config,
    )
    
    src.Print()
}
```

### Galer√≠a Interactiva
```go
func InteractiveGallery() {
    images := []string{"img1.jpg", "img2.png", "img3.webp"}
    
    for _, imgPath := range images {
        imgRGBA, err := terminal.LoadImage(imgPath)
        if err != nil {
            continue
        }
        
        src := terminal.NewImage(imgRGBA)
        src.Print()
        
        // Permitir navegaci√≥n interactiva
        src.Displacement() // Usar flechas para mover, Esc para siguiente
        
        terminal.PutReusableRGBA(imgRGBA)
    }
}
```

## üèóÔ∏è Arquitectura del Proyecto

```
terminal-go/
‚îú‚îÄ‚îÄ terminal/
‚îÇ   ‚îú‚îÄ‚îÄ ansi/                       # M√≥dulo de c√≥digos ANSI
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ colors.go           # Gesti√≥n de colores RGB/ANSI
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ cursor.go           # Control de posici√≥n del cursor  
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ erase.go            # Funciones de limpieza
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ otros.go            # Configuraciones adicionales
‚îÇ   ‚îú‚îÄ‚îÄ render/                     # Motor de renderizado principal
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ assignment.go       # Estructuras y constructores
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ files.go            # Carga de archivos de imagen
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ init.go             # Inicializaci√≥n y pools de memoria
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ moviment.go         # Sistema de navegaci√≥n interactiva
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ render.go           # Algoritmo de renderizado principal
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ variables.go        # Constantes y variables globales
‚îÇ   ‚îú‚îÄ‚îÄ main/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ main.go             # Ejemplo de uso
‚îÇ   ‚îî‚îÄ‚îÄ image_test/
‚îÇ       ‚îî‚îÄ‚îÄ soldado.webp        # Imagen de prueba
‚îî‚îÄ‚îÄ README.md
```

## ‚öôÔ∏è Funcionamiento Interno

### 1. **Procesamiento de Imagen**
```go
// El sistema lee la imagen y la convierte a RGBA
imgRGBA, err := terminal.LoadImage("imagen.jpg")

// Cada pixel contiene 4 bytes: Red, Green, Blue, Alpha
pixel := color.RGBA{R: 255, G: 128, B: 64, A: 255}
```

### 2. **Mapeo de Bloques Unicode**
```go
// Cada car√°cter del terminal representa 2 p√≠xeles verticales:
// P√≠xel superior ‚Üí Color de texto del bloque ‚ñÄ
// P√≠xel inferior ‚Üí Color de fondo del bloque ‚ñÄ

upperPixel := image.getPixel(y)       // Fila actual  
lowerPixel := image.getPixel(y+1)     // Fila siguiente

// Resultado: Un bloque ‚ñÄ con colores espec√≠ficos para texto y fondo
```

### 3. **Optimizaci√≥n de C√≥digos ANSI**
```go
// Sistema de cache para evitar regenerar c√≥digos id√©nticos
var digitLookup = [256][]byte{} // Tabla precomputada 0-255

// Generaci√≥n eficiente de c√≥digos RGB:
// "\033[38;2;R;G;B;48;2;R;G;Bm" para texto+fondo
func GetANSI_DoubleColor(buf *[]byte, rF,gF,bF,rB,gB,bB byte)
```

### 4. **Gesti√≥n de Transparencia**
```go
// 5 niveles de transparencia con bloques Unicode
const (
    ALPHA_1 = (255 * 1) / 5  // ' ' (vac√≠o)
    ALPHA_2 = (255 * 2) / 5  // '‚ñë' (puntos ligeros)  
    ALPHA_3 = (255 * 3) / 5  // '‚ñí' (puntos medios)
    ALPHA_4 = (255 * 4) / 5  // '‚ñì' (puntos densos)
    ALPHA_5 = (255 * 5) / 5  // '‚ñà' (s√≥lido)
)
```

## üîç Casos de Uso

### üìä Visualizaci√≥n de Datos
- Mostrar gr√°ficos generados como im√°genes
- Dashboards en terminal para servidores
- Monitoring visual en tiempo real

### üé® Arte ASCII Moderno  
- Conversi√≥n de fotograf√≠as a arte terminal
- Logos y banners para aplicaciones CLI
- Efectos visuales en herramientas de desarrollo

### üñ•Ô∏è Interfaces de Usuario Avanzadas
- Men√∫s gr√°ficos en aplicaciones de consola
- Previsualizadores de im√°genes en terminal
- Herramientas de desarrollo con feedback visual

## ‚ö° Optimizaciones de Rendimiento

### Pool de Memoria Reutilizable
- **Evita allocaciones**: Reutiliza objetos `image.RGBA`
- **Resoluciones precargadas**: Pools optimizados para tama√±os comunes
- **Limpieza autom√°tica**: Gesti√≥n transparente de memoria

### Cache de C√≥digos ANSI
- **Tabla de d√≠gitos precomputada**: Conversi√≥n instant√°nea 0-255
- **Buffers reutilizables**: Minimiza creaci√≥n de strings
- **Detecci√≥n de similitud**: Reduce c√≥digos ANSI redundantes

### Algoritmos Eficientes
- **Renderizado por bloques**: Procesa 2 p√≠xeles por iteraci√≥n
- **Salto de transparencias**: Omite p√≠xeles completamente transparentes
- **Clampeo optimizado**: Valida l√≠mites sin branches

## üö® Limitaciones y Consideraciones

### üñ•Ô∏è Compatibilidad
- **Windows √∫nicamente**: Usa APIs espec√≠ficas de Windows para detecci√≥n de tama√±o
- **Terminal moderno requerido**: Necesita soporte para ANSI True Color
- **PowerShell/CMD**: Funciona mejor en terminales modernos

### üéØ Limitaciones de Formato
- **GIF animado**: Solo renderiza el primer frame
- **Im√°genes muy grandes**: Se redimensionan autom√°ticamente al terminal
- **Colores limitados**: Aunque son 24-bit, la percepci√≥n depende del terminal

### ‚ö†Ô∏è Precauciones
```go
// ‚ö†Ô∏è IMPORTANTE: Siempre liberar memoria
imgRGBA, err := terminal.LoadImage("imagen.jpg")
if err != nil { return err }
defer terminal.PutReusableRGBA(imgRGBA) // ‚Üê CR√çTICO

// ‚ö†Ô∏è Evitar redimensionar terminal durante renderizado
// Puede causar distorsiones hasta el pr√≥ximo renderizado
```

## üîÆ Desarrollo Futuro

### Caracter√≠sticas Planeadas
- [ ] üêß **Soporte Linux/macOS**: Detecci√≥n de tama√±o multi-plataforma
- [ ] üéûÔ∏è **GIF animado**: Renderizado de m√∫ltiples frames
- [ ] üé® **Paletas de color**: Reducci√≥n autom√°tica para terminals limitados
- [ ] üì± **Modo responsivo**: Ajuste autom√°tico a redimensionamiento
- [ ] üéÆ **M√°s controles**: Zoom, rotaci√≥n, filtros en tiempo real

### Optimizaciones Futuras
- [ ] ‚ö° **Renderizado paralelo**: Goroutines para bloques independientes
- [ ] üß† **AI upscaling**: Mejora de calidad para im√°genes peque√±as
- [ ] üíæ **Compresi√≥n inteligente**: Reducci√≥n de c√≥digos ANSI repetitivos

## ü§ù Contribuciones

¬°Las contribuciones son bienvenidas! Por favor:

1. üç¥ Fork el repositorio
2. üåø Crea una rama para tu feature (`git checkout -b feature/nueva-funcionalidad`)
3. üíæ Commit tus cambios (`git commit -am 'Agregar nueva funcionalidad'`)
4. üì§ Push a la rama (`git push origin feature/nueva-funcionalidad`)
5. üîÑ Abre un Pull Request

## üìÑ Licencia

Este proyecto est√° bajo la Licencia GNU General Public License v3.0. Ver el archivo `LICENSE` para m√°s detalles.

## üë®‚Äçüíª Autor

**Leontas-9** - [GitHub](https://github.com/Leontas-9)

---

‚≠ê **¬°Si este proyecto te resulta √∫til, considera darle una estrella!** ‚≠ê

> *"Transformando p√≠xeles en arte ASCII, una terminal a la vez."* üé®‚ú®
>>>>>>> e121ace (Este es mi primer commit)
